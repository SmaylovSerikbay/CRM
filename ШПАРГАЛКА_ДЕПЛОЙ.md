# üöÄ –®–ø–∞—Ä–≥–∞–ª–∫–∞ –ø–æ –¥–µ–ø–ª–æ—é

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –û–±—ã—á–Ω—ã–π –¥–µ–ø–ª–æ–π (99% —Å–ª—É—á–∞–µ–≤)
```bash
make deploy-all
```
‚è±Ô∏è 2-3 –º–∏–Ω—É—Ç—ã | ‚úÖ Git pull | ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π

---

## –í—Å–µ –∫–æ–º–∞–Ω–¥—ã

| –ö–æ–º–∞–Ω–¥–∞ | –ß—Ç–æ –¥–µ–ª–∞–µ—Ç | –í—Ä–µ–º—è | Git pull |
|---------|-----------|-------|----------|
| `make deploy-all` ‚≠ê | –ü–æ–ª–Ω—ã–π –¥–µ–ø–ª–æ–π | 2-3 –º–∏–Ω | ‚úÖ –î–∞ |
| `make hot-pull` ‚ö° | –¢–æ–ª—å–∫–æ backend | 10 —Å–µ–∫ | ‚úÖ –î–∞ |
| `make bg-auto` | –î–µ–ø–ª–æ–π (—Å–ø—Ä–æ—Å–∏—Ç —Ç–∏–ø) | 2-15 –º–∏–Ω | ‚ùå –ù–µ—Ç |
| `make bg-auto-fast` | –ë—ã—Å—Ç—Ä—ã–π –¥–µ–ø–ª–æ–π | 2-3 –º–∏–Ω | ‚ùå –ù–µ—Ç |
| `make bg-auto-full` | –ü–æ–ª–Ω–∞—è –ø–µ—Ä–µ—Å–±–æ—Ä–∫–∞ | 10-15 –º–∏–Ω | ‚ùå –ù–µ—Ç |

---

## –ö–æ–≥–¥–∞ —á—Ç–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

### ‚úÖ –û–±—ã—á–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–¥–∞
```bash
make deploy-all
```

### ‚ö° –¢–æ–ª—å–∫–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ backend
```bash
make hot-pull
```

### üîÑ –ò–∑–º–µ–Ω–∏–ª–∏—Å—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (package.json, requirements.txt)
```bash
git pull
make bg-auto-full
```

### üêõ –û—Ç–∫–∞—Ç –ø—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö
```bash
make bg-rollback
```

### üìä –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å
```bash
make bg-status
```

### üìù –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏
```bash
docker compose -f docker-compose.blue-green.yml logs -f
```

---

## –ü–æ—Ä—Ç—ã –æ–∫—Ä—É–∂–µ–Ω–∏–π

| –û–∫—Ä—É–∂–µ–Ω–∏–µ | Backend | Frontend |
|-----------|---------|----------|
| Blue | 8001 | 3001 |
| Green | 8002 | 3002 |

---

## –ü—Ä–æ–±–ª–µ–º—ã –∏ —Ä–µ—à–µ–Ω–∏—è

### –°–∞–π—Ç –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–æ—Å–ª–µ –¥–µ–ø–ª–æ—è
```bash
make bg-rollback
```

### –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–∞–∫–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ –∞–∫—Ç–∏–≤–Ω–æ
```bash
make bg-status
```

### –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏ –æ—à–∏–±–æ–∫
```bash
docker compose -f docker-compose.blue-green.yml logs -f backend
docker compose -f docker-compose.blue-green.yml logs -f frontend
```

### –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –Ω–µ–∞–∫—Ç–∏–≤–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ
```bash
make bg-cleanup
```

---

## –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ NPM

–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ `.env.prod`:
```bash
NPM_HOST=http://82.115.48.40:8222
NPM_EMAIL=djek9007@gmail.com
NPM_PASSWORD=Nginx&9007
```

–ï—Å–ª–∏ –∞–≤—Ç–æ–ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç - –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç–µ –ø–æ—Ä—Ç—ã –≤—Ä—É—á–Ω—É—é –≤ NPM.

---

## –¢–∏–ø–∏—á–Ω—ã–π —Ä–∞–±–æ—á–∏–π –ø—Ä–æ—Ü–µ—Å—Å

```bash
# 1. –ü–æ–¥–∫–ª—é—á–∞–µ–º—Å—è –∫ —Å–µ—Ä–≤–µ—Ä—É
ssh root@82.115.48.40

# 2. –ü–µ—Ä–µ—Ö–æ–¥–∏–º –≤ –ø—Ä–æ–µ–∫—Ç
cd /root/crm-medical-platform

# 3. –î–µ–ø–ª–æ–∏–º
make deploy-all

# 4. –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å–∞–π—Ç
# –û—Ç–∫—Ä—ã–≤–∞–µ–º https://crm.archeo.kz

# 5. –ï—Å–ª–∏ –≤—Å–µ –û–ö - –≥–æ—Ç–æ–≤–æ! ‚úÖ
# –ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã - –æ—Ç–∫–∞—Ç—ã–≤–∞–µ–º—Å—è:
make bg-rollback
```

---

## –ü–æ–º–Ω–∏—Ç–µ! 

- ‚≠ê **`make deploy-all`** - –¥–ª—è –æ–±—ã—á–Ω–æ–≥–æ –¥–µ–ø–ª–æ—è
- ‚ö° **`make hot-pull`** - –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è backend
- üîÑ **`make bg-rollback`** - –µ—Å–ª–∏ —á—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫

–í—Å–µ –ø—Ä–æ—Å—Ç–æ! üéâ
