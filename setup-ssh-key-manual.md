# Инструкция по настройке SSH ключа для подключения без пароля

## Способ 1: Автоматический (через скрипт)

1. Запустите файл `setup-ssh-key.bat`
2. Введите пароль сервера, когда будет запрошен
3. Готово!

## Способ 2: Ручной (если автоматический не работает)

### Шаг 1: Получите ваш публичный ключ

Откройте файл в блокноте:
```
notepad %USERPROFILE%\.ssh\id_rsa.pub
```

Скопируйте **всё содержимое** файла (это одна длинная строка).

### Шаг 2: Подключитесь к серверу

```bash
ssh ubuntu@82.115.48.40
```

Введите пароль: `q+I/U9UzOPuXexTC8jbyHgs=`

### Шаг 3: Настройте директорию .ssh

```bash
mkdir -p ~/.ssh
chmod 700 ~/.ssh
```

### Шаг 4: Добавьте ваш ключ

```bash
nano ~/.ssh/authorized_keys
```

Вставьте скопированный ключ в файл. Сохраните:
- `Ctrl+O` (сохранить)
- `Enter` (подтвердить имя файла)
- `Ctrl+X` (выйти)

### Шаг 5: Установите правильные права

```bash
chmod 600 ~/.ssh/authorized_keys
```

### Шаг 6: Выйдите и проверьте

```bash
exit
```

Теперь попробуйте подключиться без пароля:

```bash
ssh ubuntu@82.115.48.40
```

Должно подключиться без запроса пароля!

## Способ 3: Через PowerShell (альтернативный)

Если у вас установлен `sshpass` или вы используете WSL, можно выполнить:

```powershell
type $env:USERPROFILE\.ssh\id_rsa.pub | ssh ubuntu@82.115.48.40 "mkdir -p ~/.ssh && chmod 700 ~/.ssh && cat >> ~/.ssh/authorized_keys && chmod 600 ~/.ssh/authorized_keys"
```

## Устранение проблем

### Если всё равно просит пароль:

1. Проверьте права на файлы на сервере:
   ```bash
   ls -la ~/.ssh/
   ```
   
   Должно быть:
   ```
   drwx------ 2 ubuntu ubuntu 4096 ... .ssh
   -rw------- 1 ubuntu ubuntu  400 ... authorized_keys
   ```

2. Проверьте содержимое `authorized_keys`:
   ```bash
   cat ~/.ssh/authorized_keys
   ```
   
   Должен быть ваш ключ (та же строка, что и в `id_rsa.pub`)

3. Проверьте логи SSH на сервере:
   ```bash
   sudo tail -f /var/log/auth.log
   ```
   
   Попробуйте подключиться и посмотрите на ошибки.

### Если ключ не копируется:

Используйте ручной способ (Способ 2) - он всегда работает.

## Полезные команды

### Подключение к серверу:
```bash
ssh ubuntu@82.115.48.40
```

### Подключение с указанием ключа:
```bash
ssh -i %USERPROFILE%\.ssh\id_rsa ubuntu@82.115.48.40
```

### Проверка подключения без пароля:
```bash
ssh -o BatchMode=yes ubuntu@82.115.48.40 "echo 'OK'"
```

Если команда выполнилась без ошибок и вывела "OK" - всё настроено правильно!



