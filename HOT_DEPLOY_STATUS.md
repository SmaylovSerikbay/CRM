# Hot Deploy - –°—Ç–∞—Ç—É—Å –∏ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

## ‚úÖ –ß—Ç–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ

### 1. Backend Hot Deploy
- **–ü—Ä–æ–±–ª–µ–º–∞**: `pkill: executable file not found`
- **–†–µ—à–µ–Ω–∏–µ**: –ó–∞–º–µ–Ω–µ–Ω–æ –Ω–∞ `docker restart`
- **–°—Ç–∞—Ç—É—Å**: ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç

### 2. Frontend Hot Deploy
- **–ü—Ä–æ–±–ª–µ–º–∞**: `next: not found` - production –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –±–µ–∑ npm
- **–†–µ—à–µ–Ω–∏–µ**: –û—Ç–∫–ª—é—á–µ–Ω–æ —Å –ø–æ–Ω—è—Ç–Ω—ã–º —Å–æ–æ–±—â–µ–Ω–∏–µ–º
- **–°—Ç–∞—Ç—É—Å**: ‚ùå –ù–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è (–ø–æ –¥–∏–∑–∞–π–Ω—É)

## üìù –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

1. **scripts/hot-deploy.sh**
   - Backend: –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `docker restart` –≤–º–µ—Å—Ç–æ `pkill`
   - Frontend: –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –∏ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã

2. **Makefile**
   - –û–±–Ω–æ–≤–ª–µ–Ω–∞ —Å–ø—Ä–∞–≤–∫–∞ (help)
   - –£–±—Ä–∞–Ω—ã –Ω–µ—Ä–∞–±–æ—á–∏–µ –∫–æ–º–∞–Ω–¥—ã –∏–∑ –æ–ø–∏—Å–∞–Ω–∏—è

3. **docs/HOT_DEPLOY_FIX.md**
   - –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø—Ä–æ–±–ª–µ–º—ã –∏ —Ä–µ—à–µ–Ω–∏—è
   - –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é

## üöÄ –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

### –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã:
```bash
make hot                  # Git pull + hot deploy backend (~10 —Å–µ–∫)
make hot-pull             # Git pull + hot deploy backend (~10 —Å–µ–∫)
```

### Backend –æ—Ç–¥–µ–ª—å–Ω–æ:
```bash
make hot-backend          # Hot deploy backend (~10 —Å–µ–∫)
make hot-pull-backend     # Git pull + hot deploy backend (~10 —Å–µ–∫)
```

### Frontend (–∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ blue-green):
```bash
make bg-auto-fast         # –ë—ã—Å—Ç—Ä—ã–π –¥–µ–ø–ª–æ–π —Å –∫—ç—à–µ–º (~2-3 –º–∏–Ω)
```

### –û–±–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞:
```bash
make bg-auto-fast         # –û–±–Ω–æ–≤–∏—Ç backend + frontend (~2-3 –º–∏–Ω)
```

## üí° –ü–æ—á–µ–º—É frontend hot deploy –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç?

Frontend –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **multi-stage Docker build**:
- –§–∏–Ω–∞–ª—å–Ω—ã–π –æ–±—Ä–∞–∑ —Å–æ–¥–µ—Ä–∂–∏—Ç —Ç–æ–ª—å–∫–æ runtime (Node.js + —Å–æ–±—Ä–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã)
- –ù–µ—Ç npm, node_modules, –∏—Å—Ö–æ–¥–Ω–æ–≥–æ –∫–æ–¥–∞
- –≠—Ç–æ **–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π** –ø–æ–¥—Ö–æ–¥ –¥–ª—è production (–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å + —Ä–∞–∑–º–µ—Ä)

**–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã**:
1. `make bg-auto-fast` - –±—ã—Å—Ç—Ä—ã–π –¥–µ–ø–ª–æ–π (~2-3 –º–∏–Ω)
2. `make dev` - development —Ä–µ–∂–∏–º —Å –Ω–∞—Å—Ç–æ—è—â–∏–º hot reload

## üìä –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏

| –ú–µ—Ç–æ–¥ | Backend | Frontend | –û–±–∞ |
|-------|---------|----------|-----|
| Hot deploy | ~10 —Å–µ–∫ | ‚ùå | ‚ùå |
| bg-auto-fast | ~1 –º–∏–Ω | ~2-3 –º–∏–Ω | ~2-3 –º–∏–Ω |
| bg-auto-full | ~5 –º–∏–Ω | ~10-15 –º–∏–Ω | ~10-15 –º–∏–Ω |

## ‚ú® –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è

–î–ª—è production –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ:
- **Backend**: `make hot-pull-backend` (–±—ã—Å—Ç—Ä–æ)
- **Frontend**: `make bg-auto-fast` (–æ–ø—Ç–∏–º–∞–ª—å–Ω–æ)
- **–û–±–∞**: `make bg-auto-fast` (–æ–¥–∏–Ω —Ä–∞–∑)
